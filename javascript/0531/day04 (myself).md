# day04

## setState 是同步还是异步

​	在定时器和原生DOM事件中，setState是同步执行的

​	在React合成事件和生命周期函数中，setState是异步执行的

​		1.setState传入对象的时候：如果进行多次调用setState，会合并成一次调用，要更新的数据只会生效一个，后面的覆盖前面的

​		2.setState传入函数的时候：如果进行多次调用setState，会合并成一次调用，要更新的数据都会生效

## 谈谈闭包

​	什么是闭包：在函数嵌套函数中，内部函数引用了外部函数的变量，外部函数调用，内部函数就形成了闭包

​	闭包的优点：延长了局部变量的声明周期，函数外部可以操作函数内部的局部变量

​	闭包的缺点：过渡使用闭包会导致变量长期占用内存不释放，可能会造成内存泄漏

​	闭包缺点的解决：及时释放变量，减少使用闭包

## 谈谈跨域

​	跨域是因为同源策略产生的

​		同源策略：浏览器的安全策略，浏览器会检测向服务器发送请求的协议名、域名、端口号是否相同，只要有一个不一致，就认为不安							全的请求，浏览器就会拒绝。

​	跨域：实际开发中，服务器和客户端往往放在不同的服务器，那么就会有客户端往不同服务器发送请求的需求，所以就要跨域

​			解决跨域的方法：

​					1.JSONP：

​						原理：利用script标签不受同源策略影响，且又可以用src属性请求资源。

​						使用：在服务端返回一个函数的调用，将数据作为当前调用函数的实参。在浏览器端，要声明一个全局函数，通过形参就									可以获取到服务端返回的对应的值。

​						条件：无兼容性问题，但仅支持get请求，要服务器配合使用

​					2.cors（跨域资源共享）：

​						条件：兼容性ie10+以上，可以发送全部请求方式，要服务器配合使用

​						使用：浏览器发送跨域请求服务器端收到一个跨域请求后，在响应头中添加Access-Control-Allow-Origin Header资源权限									配置。发送响应浏览器收到响应后，查看是否设置了`header('Access-Control-Allow-Origin:请求源域名或者*');`如									果当前域已经得到授权，则将结果返回给[JavaScript](http://lib.csdn.net/base/javascript)。否则浏览器忽略此次响应。

​					
